[% INCLUDE 'chrome/header.html', title => 'All the Candidates for the 2010 General Election' %]

<div class="callout">

    <h1>Who got your vote?</h1>
    <br>

    <form action="/seats/search" method="get">
        <input type="text" name="query" value="" alt="postcode or constituency" class="autowipe" />
        <input type="submit" value="search" />
        <p class="hints">
            eg. '<a href="/seats/search?query=sw1a+1aa">SW1A 1AA</a>'
            or  '<a href="/seats/search?query=luton">Luton</a>'
        </p>
    </form>

    Watching 
    <strong>[% counts.candidates %]</strong> candidates from 
    <strong>[% counts.parties %]</strong> parties standing for 
    <strong>[% counts.seats %]</strong> seats.

    <br>

</div>

<div class="half_column_wrapper">
<div class="left_column">

    <h2>Parties</h2>

    <table class="lined">
        <tr>
            <th>Name</td>
            <th><img class="icon" src="/static/icons/group.png" alt="#" title="number of candidates"></td>
        </tr>

    [% number_to_show = 15 %]
    [% FOREACH party = top_parties %]        

        <tr class="[% loop.count % 2 ? 'odd' : 'even' %]">
        [% IF loop.index > number_to_show %]
            <td colspan=2 style="text-align: right">
                ...and <a href="/parties">[% top_parties.size - number_to_show %] other smaller parties</a>
            </td>
        [% ELSE %]
            <td><a href="[% c.uri_for('/parties', party.code) %]">[% party.name %]</a></td>
            <td>[% party.candidate_count %]</td>
        [% END %]
        </tr>

        [% LAST IF loop.index > number_to_show %]

    [% END %]

    </table> 

</div>
</div>

<div class="half_column_wrapper">
<div class="right_column">

    <h2>Election Results</h2>

    <p>Help us gather the <a href="/results">results from this election </a> so
    that they can be made freely available.</p>

    [%  USE chart_url = url(
            'http://chart.apis.google.com/chart',
            cht  => 'p3',
            chs  => '370x150',
            chd  => "t:${declared_constituencies.declared},${declared_constituencies.pending}",
            chl  => "declared (${declared_constituencies.declared})|pending (${declared_constituencies.pending})",
            chds => '0,1000',
            chtt => 'Results declared',
            chco => '00ff00|ff8888',
        )
    %]

    <a href="/results"><img src="[% chart_url %]" height="150" width="370"></a>

    <br>

    <h2>About us</h2>

    <p>
        This is a place where you can <strong>learn more</strong> about your
        candidates and <strong>share</strong> information with other
        voters.
    </p>
    
    <p>
        We have <strong>no political bias</strong> or affiliation - we just
        want you to be <strong>informed</strong> when you go to vote.
    </p>
    
    
</div>
</div>


[% INCLUDE 'chrome/footer.html' %]
