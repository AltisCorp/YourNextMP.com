[% candidate = result %]
[% PROCESS 'chrome/header.html', title => candidate.name %]

    <style type="text/css" media="screen">
        #candidate_hero_photo {
            float: right;
            margin: 0 0 0.5em 0.5em;
            border: 1px solid #000;
        }
    </style>

    <img id="candidate_hero_photo" alt="candidate photo" src="[% c.uri_for_image( candidate.image_id, 'large' ) %]" />
    
    <h1>[% candidate.name | html %]</h1>

[% PROCESS 'stubs/item_details.html', 
    details => [
        {
            src     => '/static/icons/rosette-grey.png',
            alt     => 'party',
            href    => c.uri_for('/parties', candidate.party.code ),
            content => candidate.party.name,
        },
        {
            src     => '/static/icons/email.png',
            alt     => 'email',
            href    => "mailto:${candidate.email}"
            content => candidate.email,
        },
        {
            src     => '/static/icons/telephone.png',
            alt     => 'telephone',
            content => candidate.phone,
        },
        {
            src     => '/static/icons/printer.png',
            alt     => 'fax',
            content => candidate.fax,
        },
        {
            src     => '/static/icons/house.png',
            alt     => 'address',
            content => candidate.address,
        },
        {
            class   => 'discreet',
            src     => '/static/icons/pencil.png',
            alt     => 'edit details',
            href    => c.uri_for(candidate.code, 'edit_details'),
            content => 'edit contact details',
        },
        {
            class   => 'discreet',
            src     => '/static/icons/photo.png',
            alt     => 'edit photo',
            href    => c.uri_for(candidate.code, 'edit_photo'),
            content => 'edit photo',
        },
        {
            class   => 'discreet',
            src     => '/static/icons/pencil.png',
            alt     => 'suggest change',
            href    => 
                c.uri_for(
                    '/suggestions/add',
                    { type => 'correction', referer => c.req.uri }
                ),
            content => 'suggest change to name, party or seats',
        },
    ];
%]
<br />
    

<h2>Constituencies:</h2>

    [% FOREACH seat IN candidate.seats %]
        [% '<ul class="item_details">' IF loop.first %]
        <li>
            <img class="icon" src="/static/icons/group.png" alt="constituency">
            <a href="[% c.uri_for( '/seats', seat.code )%]">[% seat.name %]</a>
        </li>
        [% "</ul>" IF loop.last %]
    [% END %]

<br>

[% PROCESS 'links/main_listing.html' %]

[% PROCESS 'chrome/footer.html' %]
